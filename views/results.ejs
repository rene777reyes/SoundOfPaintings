<!DOCTYPE html>
<html lang="en">
<head>
    <%- include("partials/head.ejs")%>
    <title>Results</title>
</head>
<body class="text-center">
    <header><h1> Results for <%= mood %></h1></header>
    <%- include("partials/nav.ejs")%>

    <br><h4>SONGS </h4><hr>
    <% if (songs && songs.length > 0) { %>
        <% songs.slice(0, 5).forEach(function(song) { %>
            <% if (song && song.name && song.artist && song.artist.name) { %>
                <pr><%= song.name %> by <%= song.artist.name %></pr>
                <form action="/playSong" method="GET" style="display:inline;">
                    <input type="hidden" name="track" value="<%= song.name %>">
                    <input type="hidden" name="artist" value="<%= song.artist.name %>">
                    <button type="submit" class="song-btn">Play</button>
                </form>
                <form action="/favorites/songs" method="POST" style="display:inline;">
                    <input type="hidden" name="track" value="<%= song.name %>">
                    <input type="hidden" name="artist" value="<%= song.artist.name %>">
                    <button type="submit" class="song-btn">❤️</button>
                </form>
                <br>
            <% } %>
        <% }); %>
    <% } %>
    <hr>

    <p> Currently playing: <%= songInfo.trackName%> by <%= songInfo.artistName%> </p> 
    <audio autoplay controls playsinline>
        <source src="<%= songInfo.previewUrl %>"
          type="audio/mp4">
    </audio>
    <hr><h4> WORKS OF ART</h4><hr>

    <% for (i=0; i < artworksMatched.length; i++) { %>
        <h3><%= artworksMatched[i].title %> </h3> 
        by <%= artworksMatched[i].creators?.[0]?.description || "Unknown Artist" %><br>
        <img id="painting" src="<%=artworksMatched[i].images.web.url%>" alt="painting"> <br>
        <%- artworksMatched[i].description %>
        <br>
        <button class="btn btn-outline-dark"
            data-artist="<%= artworksMatched[i].creators?.[0]?.description || 'Unknown Artist' %>"
            data-title="<%= artworksMatched[i].title %>"
            data-image-url="<%= artworksMatched[i].images.web.url %>">
            ❤️ Add to Favorites
        </button>

        <hr>
    <% } %>
    <%- include("partials/footer.ejs")%>
    <hr>
</body>
</html>